import { useMemo, useState } from 'react';
import { Link } from 'react-router-dom';
import SearchBar from '../../components/SearchBar.jsx';

const FAQS = [
  {
    q: 'What is Runneth Over?',
    a: 'Runneth Over is a global fashion discovery platform that helps you find, track, and shop the styles you love. Using AI-powered visual search and real-time price tracking, we connect you to thousands of brands worldwideâ€”from everyday essentials to luxury finds.',
  },
  {
    q: 'Can I compare prices across different stores?',
    a: 'Yes, searching is free during the waitlist period.',
  },
  {
    q: 'How does the visual search work?',
    a: 'Use the heart or + button on any product card.',
  },
  {
    q: 'Can I create an account?',
    a: 'Yes, sign up on the waitlist. You can log in to access saved items.',
  },
];

const SOCIALS = [
  {
    icon: () => (
      <svg
        width='30'
        height='30'
        viewBox='0 0 30 30'
        fill='none'
        xmlns='http://www.w3.org/2000/svg'
      >
        <path
          fill-rule='evenodd'
          clip-rule='evenodd'
          d='M20.7193 29.2222C22.9744 29.2222 25.1372 28.3263 26.7318 26.7317C28.3264 25.1371 29.2222 22.9744 29.2222 20.7192V8.88909C29.2222 6.63398 28.3264 4.47123 26.7318 2.87662C25.1372 1.28201 22.9744 0.386169 20.7193 0.386169H8.88915C6.63404 0.386169 4.47129 1.28201 2.87668 2.87662C1.28207 4.47123 0.38623 6.63398 0.38623 8.88909V20.7192C0.38623 22.9744 1.28207 25.1371 2.87668 26.7317C4.47129 28.3263 6.63404 29.2222 8.88915 29.2222H20.7193ZM17.3344 5.58109C17.2507 5.33183 17.0812 5.12041 16.8561 4.98454C16.631 4.84867 16.3649 4.7972 16.1054 4.8393C15.8459 4.8814 15.6097 5.01434 15.4391 5.2144C15.2685 5.41446 15.1745 5.66862 15.1739 5.93155V19.2405C15.1739 19.8985 14.9788 20.5418 14.6132 21.089C14.2476 21.6361 13.7279 22.0626 13.12 22.3144C12.512 22.5663 11.843 22.6322 11.1976 22.5038C10.5522 22.3754 9.95931 22.0585 9.49399 21.5932C9.02866 21.1279 8.71177 20.535 8.58339 19.8896C8.45501 19.2442 8.5209 18.5752 8.77273 17.9672C9.02456 17.3592 9.45102 16.8396 9.99818 16.474C10.5453 16.1084 11.1886 15.9132 11.8467 15.9132C12.1408 15.9132 12.4229 15.7964 12.6309 15.5884C12.8389 15.3804 12.9558 15.0983 12.9558 14.8042C12.9558 14.51 12.8389 14.2279 12.6309 14.0199C12.4229 13.8119 12.1408 13.6951 11.8467 13.6951C10.7499 13.6951 9.67778 14.0203 8.76584 14.6297C7.85391 15.239 7.14314 16.1051 6.72343 17.1184C6.30371 18.1316 6.19389 19.2466 6.40786 20.3223C6.62183 21.398 7.14998 22.3861 7.92551 23.1617C8.70105 23.9372 9.68914 24.4653 10.7648 24.6793C11.8405 24.8933 12.9555 24.7835 13.9688 24.3637C14.9821 23.944 15.8482 23.2333 16.4575 22.3213C17.0668 21.4094 17.3921 20.3373 17.3921 19.2405V9.56637C18.5263 10.6193 20.1234 11.4769 22.1981 11.4769C22.4922 11.4769 22.7743 11.3601 22.9823 11.1521C23.1903 10.9441 23.3072 10.662 23.3072 10.3679C23.3072 10.0737 23.1903 9.79162 22.9823 9.58363C22.7743 9.37563 22.4922 9.25879 22.1981 9.25879C20.7607 9.25879 19.6679 8.66728 18.8575 7.8998C18.0294 7.11309 17.5296 6.1652 17.3344 5.58109Z'
          fill='#272727'
        />
      </svg>
    ),

    title: 'Tiktok',
    link: 'https://tiktok.com/runeth_over',
  },
  {
    icon: () => (
      <svg
        width='27'
        height='27'
        viewBox='0 0 27 27'
        fill='none'
        xmlns='http://www.w3.org/2000/svg'
      >
        <path
          d='M24.8112 0.0329028H2.03819C1.78219 0.0293476 1.52801 0.0762543 1.29015 0.170944C1.05229 0.265634 0.835412 0.406253 0.651903 0.584769C0.468393 0.763285 0.321847 0.976202 0.220632 1.21136C0.119418 1.44652 0.0655183 1.69931 0.0620117 1.9553V24.9972C0.0655183 25.2532 0.119418 25.506 0.220632 25.7412C0.321847 25.9763 0.468393 26.1892 0.651903 26.3677C0.835412 26.5463 1.05229 26.6869 1.29015 26.7816C1.52801 26.8763 1.78219 26.9232 2.03819 26.9196H24.8112C25.0672 26.9232 25.3214 26.8763 25.5593 26.7816C25.7971 26.6869 26.014 26.5463 26.1975 26.3677C26.381 26.1892 26.5276 25.9763 26.6288 25.7412C26.73 25.506 26.7839 25.2532 26.7874 24.9972V1.9553C26.7839 1.69931 26.73 1.44652 26.6288 1.21136C26.5276 0.976202 26.381 0.763285 26.1975 0.584769C26.014 0.406253 25.7971 0.265634 25.5593 0.170944C25.3214 0.0762543 25.0672 0.0293476 24.8112 0.0329028ZM8.16835 22.5371H4.13535V10.4381H8.16835V22.5371ZM6.15185 8.7442C5.59565 8.7442 5.06223 8.52325 4.66893 8.12995C4.27564 7.73666 4.05469 7.20324 4.05469 6.64703C4.05469 6.09083 4.27564 5.55741 4.66893 5.16412C5.06223 4.77082 5.59565 4.54987 6.15185 4.54987C6.4472 4.51638 6.74628 4.54564 7.02954 4.63575C7.31279 4.72586 7.57381 4.87478 7.79551 5.07277C8.01722 5.27075 8.1946 5.51333 8.31606 5.78462C8.43751 6.05591 8.5003 6.3498 8.5003 6.64703C8.5003 6.94427 8.43751 7.23816 8.31606 7.50945C8.1946 7.78074 8.01722 8.02332 7.79551 8.2213C7.57381 8.41929 7.31279 8.56821 7.02954 8.65832C6.74628 8.74843 6.4472 8.77769 6.15185 8.7442ZM22.7141 22.5371H18.6811V16.0439C18.6811 14.4173 18.103 13.3553 16.6377 13.3553C16.1842 13.3586 15.7426 13.5008 15.3724 13.7628C15.0023 14.0248 14.7213 14.394 14.5674 14.8206C14.4622 15.1366 14.4166 15.4693 14.433 15.802V22.5236H10.4V10.4246H14.433V12.1319C14.7993 11.4962 15.3322 10.9725 15.9742 10.6171C16.6161 10.2618 17.3429 10.0883 18.0761 10.1154C20.7648 10.1154 22.7141 11.8496 22.7141 15.5734V22.5371Z'
          fill='#272727'
        />
      </svg>
    ),
    title: 'LinkedIn',
    link: 'https://linkedIn.com/runneth_over',
  },
  {
    icon: () => (
      <svg
        width='32'
        height='31'
        viewBox='0 0 32 31'
        fill='none'
        xmlns='http://www.w3.org/2000/svg'
      >
        <path
          d='M15.851 12.2966C15.2174 12.2966 14.5981 12.4845 14.0713 12.8365C13.5445 13.1885 13.134 13.6888 12.8915 14.2741C12.649 14.8595 12.5856 15.5035 12.7092 16.1249C12.8328 16.7463 13.1379 17.3171 13.5859 17.7651C14.0339 18.2131 14.6047 18.5182 15.2261 18.6418C15.8474 18.7654 16.4915 18.7019 17.0769 18.4595C17.6622 18.217 18.1625 17.8064 18.5145 17.2797C18.8665 16.7529 19.0543 16.1335 19.0543 15.5C19.0543 15.0793 18.9715 14.6628 18.8105 14.2741C18.6495 13.8855 18.4135 13.5323 18.1161 13.2349C17.8186 12.9374 17.4655 12.7015 17.0769 12.5405C16.6882 12.3795 16.2717 12.2966 15.851 12.2966ZM28.6772 9.13206C28.6713 8.13451 28.4876 7.146 28.1347 6.2129C27.8755 5.52994 27.4743 4.90973 26.9578 4.39318C26.4412 3.87663 25.821 3.47549 25.1381 3.21623C24.205 2.86341 23.2165 2.6797 22.2189 2.67373C20.5527 2.58331 20.0618 2.58331 15.851 2.58331C11.6402 2.58331 11.1493 2.58331 9.48308 2.67373C8.48552 2.6797 7.49701 2.86341 6.56391 3.21623C5.88095 3.47549 5.26074 3.87663 4.74419 4.39318C4.22764 4.90973 3.8265 5.52994 3.56724 6.2129C3.21442 7.146 3.03072 8.13451 3.02474 9.13206C2.93433 10.7983 2.93433 11.2891 2.93433 15.5C2.93433 19.7108 2.93433 20.2016 3.02474 21.8679C3.03964 22.8688 3.22304 23.86 3.56724 24.8C3.8239 25.4805 4.2249 26.0975 4.74266 26.6083C5.25726 27.1276 5.87872 27.5287 6.56391 27.7837C7.49701 28.1366 8.48552 28.3203 9.48308 28.3262C11.1493 28.4166 11.6402 28.4166 15.851 28.4166C20.0618 28.4166 20.5527 28.4166 22.2189 28.3262C23.2165 28.3203 24.205 28.1366 25.1381 27.7837C25.8233 27.5287 26.4447 27.1276 26.9593 26.6083C27.4771 26.0975 27.8781 25.4805 28.1347 24.8C28.4864 23.8621 28.6701 22.8695 28.6772 21.8679C28.7677 20.2016 28.7677 19.7108 28.7677 15.5C28.7677 11.2891 28.7677 10.7983 28.6772 9.13206ZM25.3964 19.4654C25.3556 20.2626 25.1855 21.0478 24.8927 21.7904C24.6419 22.41 24.2691 22.9728 23.7965 23.4455C23.3239 23.9181 22.761 24.2909 22.1414 24.5416C21.3918 24.8182 20.6022 24.9709 19.8035 24.9937H11.8985C11.0998 24.9709 10.3102 24.8182 9.56058 24.5416C8.91984 24.304 8.34131 23.9242 7.86849 23.4308C7.40016 22.9677 7.03867 22.4078 6.80933 21.7904C6.53258 21.0413 6.38411 20.2509 6.37016 19.4525V11.5475C6.38411 10.749 6.53258 9.95865 6.80933 9.20956C7.04696 8.56883 7.42675 7.9903 7.92016 7.51748C8.38584 7.0523 8.94497 6.69129 9.56058 6.45831C10.3102 6.18176 11.0998 6.02907 11.8985 6.00623H19.8035C20.6022 6.02907 21.3918 6.18176 22.1414 6.45831C22.7821 6.69594 23.3607 7.07574 23.8335 7.56915C24.3018 8.03227 24.6633 8.59213 24.8927 9.20956C25.1692 9.95918 25.3219 10.7488 25.3447 11.5475V15.5C25.3447 18.1608 25.4352 18.4321 25.3964 19.4525V19.4654ZM23.3297 9.8554C23.176 9.43817 22.9335 9.05927 22.6191 8.74484C22.3046 8.43041 21.9257 8.18794 21.5085 8.03415C20.9356 7.83557 20.3322 7.73938 19.726 7.74998H11.976C11.3667 7.75594 10.7632 7.86963 10.1935 8.08581C9.78265 8.23262 9.40776 8.46519 9.09375 8.76807C8.77973 9.07095 8.53378 9.4372 8.37224 9.84248C8.18535 10.4179 8.09372 11.02 8.10099 11.625V19.375C8.11451 19.9835 8.22796 20.5857 8.43683 21.1575C8.59062 21.5747 8.83309 21.9536 9.14752 22.268C9.46195 22.5825 9.84085 22.8249 10.2581 22.9787C10.8094 23.1808 11.3892 23.2941 11.976 23.3146H19.726C20.3353 23.3086 20.9388 23.1949 21.5085 22.9787C21.9257 22.8249 22.3046 22.5825 22.6191 22.268C22.9335 21.9536 23.176 21.5747 23.3297 21.1575C23.5459 20.5878 23.6596 19.9843 23.6656 19.375V11.625C23.6653 11.0151 23.5515 10.4106 23.3297 9.84248V9.8554ZM15.851 20.4341C15.2036 20.4341 14.5626 20.3064 13.9647 20.0583C13.3668 19.8102 12.8237 19.4465 12.3666 18.9882C11.9094 18.5298 11.5472 17.9858 11.3006 17.3872C11.0541 16.7887 10.928 16.1473 10.9297 15.5C10.9297 14.5235 11.2195 13.5691 11.7622 12.7574C12.305 11.9457 13.0763 11.3133 13.9787 10.9402C14.881 10.5671 15.8738 10.4702 16.8313 10.6616C17.7888 10.853 18.6679 11.3242 19.3575 12.0156C20.047 12.7069 20.5159 13.5873 20.7048 14.5453C20.8938 15.5033 20.7942 16.4958 20.4188 17.3972C20.0433 18.2985 19.4089 19.0683 18.5958 19.6089C17.7827 20.1495 16.8274 20.4367 15.851 20.4341ZM21.0177 11.5346C20.7321 11.5043 20.4679 11.3695 20.2758 11.1561C20.0838 10.9426 19.9775 10.6656 19.9775 10.3785C19.9775 10.0914 20.0838 9.81442 20.2758 9.60098C20.4679 9.38753 20.7321 9.2527 21.0177 9.22248C21.3032 9.2527 21.5674 9.38753 21.7595 9.60098C21.9515 9.81442 22.0578 10.0914 22.0578 10.3785C22.0578 10.6656 21.9515 10.9426 21.7595 11.1561C21.5674 11.3695 21.3032 11.5043 21.0177 11.5346Z'
          fill='black'
        />
      </svg>
    ),
    title: 'Instagram',
    link: 'https://instagram.com/runneth_over',
  },
  {
    icon: () => (
      <svg
        width='32'
        height='31'
        viewBox='0 0 32 31'
        fill='none'
        xmlns='http://www.w3.org/2000/svg'
      >
        <path
          d='M26.1843 5.16669H5.51766C4.09683 5.16669 2.94724 6.32919 2.94724 7.75002L2.93433 23.25C2.93433 24.6709 4.09683 25.8334 5.51766 25.8334H26.1843C27.6052 25.8334 28.7677 24.6709 28.7677 23.25V7.75002C28.7677 6.32919 27.6052 5.16669 26.1843 5.16669ZM26.1843 10.3334L15.851 16.7917L5.51766 10.3334V7.75002L15.851 14.2084L26.1843 7.75002V10.3334Z'
          fill='black'
        />
      </svg>
    ),
    title: 'Mail',
    link: 'tel:https://support@runnethover.com',
  },
];

export default function Faqs() {
  const [query, setQuery] = useState('');
  const [openId, setOpenId] = useState(null);
  const results = useMemo(() => {
    const q = query.trim().toLowerCase();
    if (!q) return FAQS;
    return FAQS.filter(
      (f) => f.q.toLowerCase().includes(q) || f.a.toLowerCase().includes(q)
    );
  }, [query]);

  const plusD =
    'M20.8333 9.83333C20.8333 9.3471 20.6402 8.88079 20.2964 8.53697C19.9525 8.19315 19.4862 8 19 8C18.5138 8 18.0475 8.19315 17.7036 8.53697C17.3598 8.88079 17.1667 9.3471 17.1667 9.83333V17.1667H9.83333C9.3471 17.1667 8.88079 17.3598 8.53697 17.7036C8.19315 18.0475 8 18.5138 8 19C8 19.4862 8.19315 19.9525 8.53697 20.2964C8.88079 20.6402 9.3471 20.8333 9.83333 20.8333H17.1667V28.1667C17.1667 28.6529 17.3598 29.1192 17.7036 29.463C18.0475 29.8068 18.5138 30 19 30C19.4862 30 19.9525 29.8068 20.2964 29.463C20.6402 29.1192 20.8333 28.6529 20.8333 28.1667V20.8333H28.1667C28.6529 20.8333 29.1192 20.6402 29.463 20.2964C29.8068 19.9525 30 19.4862 30 19C30 18.5138 29.8068 18.0475 29.463 17.7036C29.1192 17.3598 28.6529 17.1667 28.1667 17.1667H20.8333V9.83333Z';

  return (
    <div className='container-px py-12'>
      <h1 className='container-px text-12xl md:text-8xl text-6xl pb-8 font-Playfair'>
        Frequently Asked Questions
      </h1>
      <p>Have questions? We're here to help</p>

      <div className='mt-6 max-w-2xl'>
        <SearchBar
          value={query}
          onChange={setQuery}
          placeholder='Search FAQs...'
        />
      </div>

      <div className="flex gap-2 align-middle my-4">
        {SOCIALS.map(social => social.icon()

        )}
      </div>
      <ul className='space-y-0'>
        {results.map((f, idx) => {
          const isOpen = openId === f.q;
          return (
            <li key={idx} className='border-b border-black last:border-b-0'>
              <div className='py-6 px-0'>
                <div className='flex items-center justify-between'>
                  <div className=' text-gray-900 text-lg pr-8'>{f.q}</div>
                  <button
                    className='flex-shrink-0 w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 transition-colors'
                    onClick={() => setOpenId(isOpen ? null : f.q)}
                  >
                    <svg
                      width='38'
                      height='38'
                      viewBox='0 0 38 38'
                      fill='none'
                      xmlns='http://www.w3.org/2000/svg'
                    >
                      <path
                        fill-rule='evenodd'
                        clip-rule='evenodd'
                        d='M0.666748 19C0.666748 8.87446 8.87458 0.666626 19.0001 0.666626C29.1256 0.666626 37.3334 8.87446 37.3334 19C37.3334 29.1255 29.1256 37.3333 19.0001 37.3333C8.87458 37.3333 0.666748 29.1255 0.666748 19ZM19.0001 4.33329C15.1102 4.33329 11.3797 5.87853 8.62918 8.62906C5.87865 11.3796 4.33341 15.1101 4.33341 19C4.33341 22.8898 5.87865 26.6203 8.62918 29.3709C11.3797 32.1214 15.1102 33.6666 19.0001 33.6666C22.8899 33.6666 26.6204 32.1214 29.371 29.3709C32.1215 26.6203 33.6667 22.8898 33.6667 19C33.6667 15.1101 32.1215 11.3796 29.371 8.62906C26.6204 5.87853 22.8899 4.33329 19.0001 4.33329Z'
                        fill='#4F4F4F'
                      />
                      {isOpen ? (
                        <path d='M9 18h20v2h-20z' fill='#4F4F4F' />
                      ) : (
                        <path
                          fill-rule='evenodd'
                          clip-rule='evenodd'
                          d={plusD}
                          fill='#4F4F4F'
                        />
                      )}
                    </svg>
                  </button>
                </div>
                {isOpen && (
                  <div className='text-gray-600 mt-3 text-base leading-relaxed pr-8'>
                    {f.a}
                  </div>
                )}
              </div>
            </li>
          );
        })}
        {results.length === 0 && (
          <li className='py-8 text-center text-gray-500'>
            No FAQs match your search.
          </li>
        )}
      </ul>
    </div>
  );
}
